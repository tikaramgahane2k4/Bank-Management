{% extends "base.html" %}
{% block content %}

<div class="header-section" style="margin-bottom: 2rem; display:flex; justify-content:space-between; align-items:start;">
    <div>
        <h1>Account #{{ account.account_number }}</h1>
        <p style="color:var(--light-text);">Owner: {{ user.name }}</p>
    </div>
    <div class="card" style="margin:0; padding:1rem; text-align:right; background: #f8fafc;">
        <small style="display:block; color:var(--light-text); font-weight:600;">Current Balance</small>
        <div style="font-size:1.8rem; font-weight:700; color:var(--primary-color);">${{ "%.2f"|format(account.balance) }}</div>
    </div>
</div>

<div style="display:grid; grid-template-columns: 1fr 1fr; gap:1rem; max-width:1000px; margin:0 auto;">
    <div class="card">
        <h3>Deposit</h3>
        <form method="post" action="{{ url_for('deposit') }}">
            <input type="hidden" name="account_number" value="{{ account.account_number }}" />
            <div class="form-group">
                <label>Amount</label>
                <input type="number" name="amount" step="0.01" required />
            </div>
            <div class="form-group">
                <label>PIN (if set)</label>
                <input type="password" name="pin" maxlength="6" />
            </div>
            <button type="submit">Deposit</button>
        </form>
    </div>

    <div class="card">
        <h3>Transfer</h3>
        <form method="post" action="{{ url_for('transfer') }}">
            <input type="hidden" name="from_account" value="{{ account.account_number }}" />
            <div class="form-group">
                <label>Recipient Account Number</label>
                <input type="text" name="to_account" required />
            </div>
            <div class="form-group">
                <label>Amount</label>
                <input type="number" name="amount" step="0.01" required />
            </div>
            <div class="form-group">
                <label>PIN (if set)</label>
                <input type="password" name="pin" maxlength="6" />
            </div>
            <button type="submit" style="background:var(--primary-color);">Transfer</button>
        </form>
    </div>
</div>

<div class="card" style="max-width:1000px; margin:1rem auto;">
    <h3>Recent Transactions</h3>
    {% if transactions %}
    <div style="max-height:300px; overflow-y:auto;">
        {% for tx in transactions %}
        <div style="display:flex; justify-content:space-between; padding:0.75rem; border-bottom:1px solid var(--bg-color);">
            <div>
                <strong>{{ tx.type|capitalize }}</strong>
                <div style="color:var(--light-text); font-size:0.9rem;">{{ tx.created_at.strftime('%Y-%m-%d %H:%M') }}</div>
            </div>
            <div style="text-align:right;">
                <strong>${{ "%.2f"|format(tx.amount) }}</strong>
                <div style="color:var(--light-text); font-size:0.9rem;">{% if tx.from_account %}{{ tx.from_account }} âž” {% endif %}{{ tx.to_account }}</div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p style="color:var(--light-text);">No recent transactions.</p>
    {% endif %}
</div>

{% endblock %}
